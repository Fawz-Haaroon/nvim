-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  ğŸ¯ SNACKS PICKER - Enhanced Picker Complementing Telescope
--  ğŸ“ Files | ğŸ” Grep | ğŸ“‹ Buffers | ğŸ•’ Recent | ğŸ’» Commands | ğŸ“‚ Explorer
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

return {
    "folke/snacks.nvim",
    keys = {
        -- ğŸ¯ SNACKS PICKER (Complementary to Telescope)
        { "<leader>sp", function() Snacks.picker.files() end, desc = "ğŸ“ Files (Snacks)" },
        { "<leader>sg", function() Snacks.picker.grep() end, desc = "ğŸ” Grep (Snacks)" },
        { "<leader>sw", function() Snacks.picker.grep_word() end, desc = "ğŸ” Grep Word (Snacks)", mode = { "n", "x" } },
        { "<leader>sb", function() Snacks.picker.buffers() end, desc = "ğŸ“‹ Buffers (Snacks)" },
        { "<leader>sr", function() Snacks.picker.recent() end, desc = "ğŸ•’ Recent (Snacks)" },
        { "<leader>sc", function() Snacks.picker.commands() end, desc = "ğŸ’» Commands (Snacks)" },
        { "<leader>sk", function() Snacks.picker.keymaps() end, desc = "âŒ¨ï¸ Keymaps (Snacks)" },
        { "<leader>sh", function() Snacks.picker.help() end, desc = "â“ Help (Snacks)" },
        { "<leader>sH", function() Snacks.picker.highlights() end, desc = "ğŸ¨ Highlights (Snacks)" },
        { "<leader>sm", function() Snacks.picker.marks() end, desc = "ğŸ“ Marks (Snacks)" },
        { "<leader>sj", function() Snacks.picker.jumps() end, desc = "ğŸ¦˜ Jumps (Snacks)" },
        { "<leader>sq", function() Snacks.picker.qflist() end, desc = "ğŸ“ Quickfix (Snacks)" },
        { "<leader>sl", function() Snacks.picker.loclist() end, desc = "ğŸ“ Location List (Snacks)" },
        { "<leader>su", function() Snacks.picker.undo() end, desc = "â†©ï¸ Undo History (Snacks)" },
        { "<leader>sR", function() Snacks.picker.resume() end, desc = "ğŸ”„ Resume (Snacks)" },
        { "<leader>si", function() Snacks.picker.icons() end, desc = "ğŸ¨ Icons (Snacks)" },
        
        -- ğŸ“‚ EXPLORER (Picker-based file explorer)  
        { "<leader>e", function() Snacks.explorer() end, desc = "ğŸ“‚ Explorer (Snacks)" },
        { "<leader>E", function() Snacks.explorer({ cwd = vim.fn.expand("%:p:h") }) end, desc = "ğŸ“‚ Explorer (Current Dir)" },
        
        -- ğŸ” LSP INTEGRATION
        { "<leader>sd", function() Snacks.picker.diagnostics() end, desc = "ğŸ©º Diagnostics (Snacks)" },
        { "<leader>sD", function() Snacks.picker.diagnostics_buffer() end, desc = "ğŸ©º Buffer Diagnostics (Snacks)" },
        { "<leader>ss", function() Snacks.picker.lsp_symbols() end, desc = "ğŸ“Š LSP Symbols (Snacks)" },
        { "<leader>sS", function() Snacks.picker.lsp_workspace_symbols() end, desc = "ğŸ¢ Workspace Symbols (Snacks)" },
        { "gd", function() Snacks.picker.lsp_definitions() end, desc = "ğŸ¯ Goto Definition (Snacks)" },
        { "gD", function() Snacks.picker.lsp_declarations() end, desc = "ğŸ“ Goto Declaration (Snacks)" },
        { "gr", function() Snacks.picker.lsp_references() end, desc = "ğŸ”— References (Snacks)", nowait = true },
        { "gI", function() Snacks.picker.lsp_implementations() end, desc = "âš™ï¸ Goto Implementation (Snacks)" },
        { "gy", function() Snacks.picker.lsp_type_definitions() end, desc = "ğŸ“ Goto Type Definition (Snacks)" },
        
        -- ğŸŒ¿ GIT INTEGRATION
        { "<leader>gb", function() Snacks.picker.git_branches() end, desc = "ğŸŒ¿ Git Branches (Snacks)" },
        { "<leader>gl", function() Snacks.picker.git_log() end, desc = "ğŸ“œ Git Log (Snacks)" },
        { "<leader>gL", function() Snacks.picker.git_log_line() end, desc = "ğŸ“œ Git Log Line (Snacks)" },
        { "<leader>gs", function() Snacks.picker.git_status() end, desc = "ğŸ“Š Git Status (Snacks)" },
        { "<leader>gS", function() Snacks.picker.git_stash() end, desc = "ğŸ“¦ Git Stash (Snacks)" },
        { "<leader>gd", function() Snacks.picker.git_diff() end, desc = "ğŸ“Š Git Diff (Snacks)" },
        { "<leader>gf", function() Snacks.picker.git_log_file() end, desc = "ğŸ“œ Git Log File (Snacks)" },
        
        -- ğŸ” SEARCH ALTERNATIVES
        { "<leader>/", function() Snacks.picker.lines() end, desc = "ğŸ” Buffer Lines (Snacks)" },
        { "<leader>?", function() Snacks.picker.grep_buffers() end, desc = "ğŸ” Grep Buffers (Snacks)" },
    },
    
    opts = {
        -- Enable picker and related features
        picker = { enabled = true },
        explorer = { enabled = true },
        
        -- âš™ï¸ PICKER CONFIGURATION (Advanced)
        picker = {
            layout = {
                backdrop = 60,
                cycle = true,
                width = 0.9,
                height = 0.9,
                box = "horizontal",
                preview = {
                    width = 0.5,
                    border = "rounded",
                },
            },
            win = {
                input = {
                    keys = {
                        ["<c-p>"] = "preview_toggle",
                        ["<c-l>"] = "layout_toggle",
                    },
                },
            },
            sources = {
                files = {
                    hidden = true,
                    follow_symlinks = true,
                },
                buffers = {
                    current = false,
                },
            },
        },
        
        -- ğŸ“‚ EXPLORER CONFIGURATION
        explorer = {
            win = {
                position = "right",
                width = 30,
            },
        },
    },
    
    config = function(_, opts)
        local ok, snacks = pcall(require, "snacks")
        if not ok then
            return
        end

        snacks.setup(opts)
        
        vim.notify("ğŸ¯ Snacks Picker & Explorer Ready!", vim.log.levels.INFO)
    end,
}